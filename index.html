package progq2;

import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import javax.swing.SwingUtilities;

public class ProgQ2 {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // Create and populate the sequential file (movies.txt)
        try (BufferedWriter writer = new BufferedWriter(new FileWriter("movies.txt"))) {
            // Writing information about movies to the file
            writer.write("MOVIE TICKET REPORT\n");
            writer.write("*************************\n");
            writer.write("Movie Name : Napoleon \n");
            writer.write("MOVIE TICKET PRICE: 100\n");
            writer.write("*************************\n");
            System.out.println("File writing completed successfully.");
        } catch (IOException e) {
            System.out.println("Error: " + e.getMessage());
        }

        // Launch the Swing application
        SwingUtilities.invokeLater(() -> new MovieTickets().setVisible(true));
    }
}


package progq2;

import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.HashMap;

public class MovieTickets extends JFrame {

    private JComboBox<String> selectMovieCombo; // Combo box for movies
    private JTextField ticketCountField; // Input field for number of tickets
    private DefaultListModel<String> listModel; // Model for the JList
    private JList<String> infoList; // List box for displaying movie information
    private HashMap<String, String[]> movieData; // HashMap to store movie information

    public MovieTickets() {
        setTitle("MOVIE TICKETS");
        setSize(400, 300);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        setLayout(new BorderLayout());

        // Menu bar setup
        JMenuBar menuBar = new JMenuBar();
        JMenu fileMenu = new JMenu("File");
        JMenuItem exitItem = new JMenuItem("Exit");
        exitItem.addActionListener(e -> System.exit(0));
        fileMenu.add(exitItem);

        JMenu toolsMenu = new JMenu("Tools");
        JMenuItem processItem = new JMenuItem("Process");
        processItem.addActionListener(new ProcessButtonListener());

        JMenuItem clearItem = new JMenuItem("Clear");
        clearItem.addActionListener(new ClearButtonListener());

        toolsMenu.add(processItem);
        toolsMenu.add(clearItem);

        menuBar.add(fileMenu);
        menuBar.add(toolsMenu);
        setJMenuBar(menuBar);

        // Dropdown options for movie choices
        String[] movies = {"Napoleon"};
        selectMovieCombo = new JComboBox<>(movies);
        add(selectMovieCombo, BorderLayout.NORTH);

        // Input field for number of tickets
        JPanel inputPanel = new JPanel();
        inputPanel.add(new JLabel("Number of Tickets:"));
        ticketCountField = new JTextField(10);
        inputPanel.add(ticketCountField);
        add(inputPanel, BorderLayout.CENTER);

        // List box for displaying movie information
        listModel = new DefaultListModel<>();
        infoList = new JList<>(listModel);
        add(new JScrollPane(infoList), BorderLayout.SOUTH);

        // Load movie data from file
        movieData = new HashMap<>();
        loadMovieData();
    }

    // Load movie data from file
    private void loadMovieData() {
        try (BufferedReader reader = new BufferedReader(new FileReader("movies.txt"))) {
            String line;
            String movieName = null;
            String ticketPrice = null;
            while ((line = reader.readLine()) != null) {
                if (line.startsWith("Movie Name")) {
                    movieName = line.split(":")[1].trim();
                } else if (line.startsWith("MOVIE TICKET PRICE")) {
                    ticketPrice = line.split(":")[1].trim();
                }
                if (movieName != null && ticketPrice != null) {
                    movieData.put(movieName, new String[]{ticketPrice});
                    movieName = null;
                    ticketPrice = null;
                }
            }
        } catch (IOException e) {
            JOptionPane.showMessageDialog(this, "Error loading movie data: " + e.getMessage(), "Error", JOptionPane.ERROR_MESSAGE);
        }
    }

    // Action listener for the Process button
    private class ProcessButtonListener implements ActionListener {
        @Override
        public void actionPerformed(ActionEvent e) {
            String selectedMovie = (String) selectMovieCombo.getSelectedItem();
            String ticketCountStr = ticketCountField.getText();
            if (selectedMovie != null && movieData.containsKey(selectedMovie) && !ticketCountStr.isEmpty()) {
                int ticketCount = Integer.parseInt(ticketCountStr);
                int ticketPrice = Integer.parseInt(movieData.get(selectedMovie)[0]);
                int totalPrice = ticketCount * ticketPrice;

                listModel.clear();
                listModel.addElement("Movie Name: " + selectedMovie);
                listModel.addElement("Ticket Price: " + ticketPrice);
                listModel.addElement("Number of Tickets: " + ticketCount);
                listModel.addElement("Total Price: " + totalPrice);
            } else {
                JOptionPane.showMessageDialog(MovieTickets.this, "Invalid movie or ticket count", "Error", JOptionPane.ERROR_MESSAGE);
            }
        }
    }

    // Action listener for the Clear button
    private class ClearButtonListener implements ActionListener {
        @Override
        public void actionPerformed(ActionEvent e) {
            listModel.clear();
        }
    }
}


            
